<!doctype html><html lang=en><meta charset=utf-8>
<meta name=viewport content="width=device-width">
<title>Upgrade Notes | CSE Thesis Musings</title>
<meta name=generator content="Hugo Eureka 0.8.2">
<link rel=stylesheet href=../../css/eureka.min.css>
<script defer src=../../js/eureka.min.js></script>
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link rel=preload href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Noto+Serif+SC:wght@400;600;700&display=swap" as=style onload="this.onload=null,this.rel='stylesheet'">
<link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/styles/solarized-light.min.css media=print onload="this.media='all',this.onload=null" crossorigin>
<script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/highlight.min.js crossorigin></script>
<script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/dart.min.js crossorigin></script>
<script defer src=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/js/all.min.js integrity="sha256-uNYoXefWRqv+PsIF/OflNmwtKM4lStn9yrz2gVl6ymo=" crossorigin></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X media=print onload="this.media='all',this.onload=null" crossorigin>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script>
<script defer src=https://cdn.jsdelivr.net/npm/mermaid@8.9.2/dist/mermaid.min.js integrity="sha256-Zmpaaj+GXFsPF5WdPArSrnW3b30dovldeKsW00xBVwE=" crossorigin></script>
<link rel=preconnect href=https://www.google-analytics.com crossorigin>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107434487-2"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-107434487-2')</script>
<script>(function(e,b,f,c,a,d){b[c]=b[c]||function(){(b[c].q=b[c].q||[]).push(arguments)},a=e.createElement('script'),d=e.getElementsByTagName('script')[0],a.async=1,a.src=f,a.id='fathom-script',d.parentNode.insertBefore(a,d)})(document,window,'//ss.featherbear.cc/tracker.js','fathom'),fathom('set','siteId','NEQTU'),fathom('trackPageview')</script>
<style>html.dark{--color-primary-bg:#232327 !important}div#sidebar-toc>ul.pl-6{margin-left:1em}</style>
<meta name=description content="Firmware is upgraded incrementally rather than straight to the latest version  Probably because of dependencies, etc    Process  Download to blk10 Flash blk10 to blk9 Boot into blk9 (new) Flash blk10 to blk8   Upgrade Log The original firmware that was on the device was 01.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"/posts/"},{"@type":"ListItem","position":2,"name":"Upgrade Notes","item":"/posts/upgrade-notes/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/upgrade-notes/"},"headline":"Upgrade Notes | CSE Thesis Musings","datePublished":"2022-07-11T13:44:33+00:00","dateModified":"2022-07-11T13:44:33+00:00","wordCount":268,"publisher":{"@type":"Person","name":"A. Wong"},"description":"Firmware is upgraded incrementally rather than straight to the latest version  Probably because of dependencies, etc    Process  Download to blk10 Flash blk10 to blk9 Boot into blk9 (new) Flash blk10 to blk8   Upgrade Log The original firmware that was on the device was 01."}</script><meta property="og:title" content="Upgrade Notes | CSE Thesis Musings">
<meta property="og:type" content="article">
<meta property="og:url" content="/posts/upgrade-notes/">
<meta property="og:description" content="Firmware is upgraded incrementally rather than straight to the latest version  Probably because of dependencies, etc    Process  Download to blk10 Flash blk10 to blk9 Boot into blk9 (new) Flash blk10 to blk8   Upgrade Log The original firmware that was on the device was 01.">
<meta property="og:locale" content="en">
<meta property="og:site_name" content="CSE Thesis Musings">
<meta property="article:published_time" content="2022-07-11T13:44:33+00:00">
<meta property="article:modified_time" content="2022-07-11T13:44:33+00:00">
<meta property="article:section" content="posts">
<body class="flex flex-col min-h-screen">
<header class="fixed flex items-center w-full min-h-16 pl-scrollbar z-50 bg-secondary-bg shadow-sm">
<div class="w-full max-w-screen-xl mx-auto"><script>let storageColorScheme=localStorage.getItem("lightDarkMode");((storageColorScheme=='Auto'||storageColorScheme==null)&&window.matchMedia("(prefers-color-scheme: dark)").matches||storageColorScheme=="Dark")&&document.getElementsByTagName('html')[0].classList.add('dark')</script>
<nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0">
<a href=../../ class="mr-6 text-primary-text text-xl font-bold">CSE Thesis Musings</a>
<button id=navbar-btn class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
<i class="fas fa-bars"></i>
</button>
<div id=target class="hidden block md:flex md:flex-grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20">
<div class="md:flex md:h-16 text-sm md:flex-grow pb-4 md:pb-0 border-b md:border-b-0">
<a href=../../#about class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">About</a>
<a href=../../posts/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 selected-menu-item mr-4">Posts</a>
<a href=../../docs/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">Docs</a>
<a href=../../tldr/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">Progress Log</a>
</div>
<div class=flex>
<div class="relative pt-4 md:pt-0">
<div class="cursor-pointer hover:text-eureka" id=lightDarkMode>
<i class="fas fa-adjust"></i>
</div>
<div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id=is-open>
</div>
<div class="absolute flex flex-col left-0 md:left-auto right-auto md:right-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40" id=lightDarkOptions>
<span class="px-4 py-1 hover:text-eureka" name=Light>Light</span>
<span class="px-4 py-1 hover:text-eureka" name=Dark>Dark</span>
<span class="px-4 py-1 hover:text-eureka" name=Auto>Auto</span>
</div>
</div>
</div>
</div>
<div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id=is-open-mobile>
</div>
</nav>
<script>let element=document.getElementById('lightDarkMode');storageColorScheme==null||storageColorScheme=='Auto'?document.addEventListener('DOMContentLoaded',()=>{window.matchMedia("(prefers-color-scheme: dark)").addEventListener('change',switchDarkMode)}):storageColorScheme=="Light"?(element.firstElementChild.classList.remove('fa-adjust'),element.firstElementChild.setAttribute("data-icon",'sun'),element.firstElementChild.classList.add('fa-sun')):storageColorScheme=="Dark"&&(element.firstElementChild.classList.remove('fa-adjust'),element.firstElementChild.setAttribute("data-icon",'moon'),element.firstElementChild.classList.add('fa-moon')),document.addEventListener('DOMContentLoaded',()=>{getcolorscheme(),switchBurger()})</script>
</div>
</header>
<main class="flex-grow pt-16">
<div class=pl-scrollbar>
<div class="w-full max-w-screen-xl lg:px-4 xl:px-8 mx-auto">
<div class="grid grid-cols-2 lg:grid-cols-8 gap-4 lg:pt-12">
<div class="col-span-2 lg:col-span-6 bg-secondary-bg rounded px-6 py-8">
<h1 class="font-bold text-3xl text-primary-text">Upgrade Notes</h1>
<div class="flex flex-wrap flex-row items-center mt-2 text-tertiary-text">
<div class="mr-6 my-2">
<i class="fas fa-calendar mr-1"></i>
<span>2022-07-11</span>
</div>
</div>
<div class=content>
<ul>
<li>Firmware is upgraded incrementally rather than straight to the latest version
<ul>
<li>Probably because of dependencies, etc</li>
</ul>
</li>
</ul>
<h2 id=process>Process</h2>
<ol>
<li>Download to blk10</li>
<li>Flash blk10 to blk9</li>
<li>Boot into blk9 (new)</li>
<li>Flash blk10 to blk8</li>
</ol>
<hr>
<h1 id=upgrade-log>Upgrade Log</h1>
<p>The original firmware that was on the device was <code>01.15.58</code></p>
<p>There was an upgrade notice to go to <code>v01.17.08</code><br>
Once upgraded, there was another upgrade to go to <code>01.17.08</code><br>
Once upgraded, there was another upgrade to go to <code>01.19.98</code></p>
<blockquote>
<p>I think I got locked out at this point, because the UART shell didn&rsquo;t accept my root credentials</p>
</blockquote>
<h2 id=files-that-are-there>Files That Are There?</h2>
<ul>
<li>/usr/sbin/tcpdump
<ul>
<li>Call to tcpdump in /opt/rockrobo/wlan/wlanmgr</li>
</ul>
</li>
<li>/usr/bin/scp</li>
</ul>
<h2 id=notice>Notice</h2>
<ul>
<li>Newer versions no longer use the <code>vinda</code> file, and use <s>an embedded linux OS rather than Ubuntu 14. Now uses</s> busybox.
<ul>
<li>Edit: <code>/etc/os-release</code> still seems to suggest <code>VERSION="14.04.3 LTS, Trusty Tahr"</code>, but the system is much more heavily locked down</li>
</ul>
</li>
<li>The serial/console login seems to be handled by <a href=../sbin-rr_login/><code>/sbin/rr_login</code></a>
<ul>
<li>Tries to access <code>/mnt/default/shadow</code> - but it doesn&rsquo;t exist on the system and hence always errors out</li>
<li>We can modify <code>/etc/inittab</code> and switch out <code>/sbin/rr_login</code> for the default login handler</li>
</ul>
</li>
<li>IPv6 is blocked with <code>ip6tables</code></li>
<li>Dropbear is used as the SSH server
<ul>
<li>The <code>WatchDoge</code> process will re-run the iptables SSH drop rule, rendering simple conf commenting void</li>
<li>Have to patch <code>WatchDoge</code> to null the iptables command</li>
</ul>
</li>
<li>The <code>rrlogd</code> process has been upgraded to drop SSH (iptables) if the system model version check enters the false branch
<ul>
<li>Also need to patch <code>rrlogd</code> to null the iptables command</li>
</ul>
</li>
<li><code>/opt/rockrobo/wlan/wlanmgr</code> has the ability to call <code>tcpdump</code> during debug mode</li>
</ul>
<blockquote>
<p>Supposedly <em>Giese</em> realised this in 2020 as well oop</p>
<p><a href="https://www.youtube.com/watch?v=r_04K5SPEXI" title="https://www.youtube.com/watch?v=r_04K5SPEXI">https://www.youtube.com/watch?v=r_04K5SPEXI</a></p>
</blockquote>
<p><img src=../../uploads/20220711-snipaste_2022-07-12_05-00-23.jpg alt></p>
</div>
<div class="flex flex-col md:flex-row md:justify-between -mx-2 mt-4 px-2 pt-4 border-t">
<div>
<span class="block font-bold">Previous</span>
<a href=../../posts/upgraded-boot-log/ class=block>Upgraded - Boot Log</a>
</div>
<div class="md:text-right mt-4 md:mt-0">
<span class="block font-bold">Next</span>
<a href=../../posts/bootring/ class=block>Bootring</a>
</div>
</div>
</div>
<div class=col-span-2>
<div class="sticky top-16 z-10 hidden lg:block px-6 py-4 bg-primary-bg">
<span class="text-lg font-semibold">On This Page</span>
</div>
<div class="sticky-toc hidden lg:block px-6 pb-6">
<nav id=TableOfContents>
<ul>
<li><a href=#process>Process</a></li>
</ul>
<ul>
<li><a href=#files-that-are-there>Files That Are There?</a></li>
<li><a href=#notice>Notice</a></li>
</ul>
</nav>
</div>
<script>window.addEventListener('DOMContentLoaded',()=>{enableStickyToc()})</script>
</div>
</div>
<script>document.addEventListener('DOMContentLoaded',()=>{hljs.initHighlightingOnLoad()})</script>
</div>
</div>
</main>
<footer class=pl-scrollbar>
<div class="w-full max-w-screen-xl mx-auto"><div class="text-center p-6 pin-b">
<p class="text-sm text-tertiary-text">&copy; 2021 <a href=https://featherbear.cc>Andrew Wong (z5206677)</a>
&#183; Powered by the <a href=https://github.com/wangchucheng/hugo-eureka class=hover:text-eureka>Eureka</a> theme for <a href=https://gohugo.io class=hover:text-eureka>Hugo</a></p>
</div></div>
</footer>
</body>
</html>